package IntefaceEjer2;

import java.util.*;

public class Main {

	public static void main(String[] args) {
		// TODO Auto-generated method stub
		ArrayList<Persona> fronteras = new ArrayList<Persona>();
//		System.out.println("Elige opciones de menú");
//		System.out.println("1- Paso de frontera\n 2-Mostrar todas las personas\n 3-Búsqueda por nombre\n 4-Búsqueda por DNI\n 5-Salir");
		Scanner in = new Scanner(System.in);
		boolean estado = true;
		while (estado) {
			int menu = comprobarEntrada();
			boolean introducir = true;
			switch (menu) {
			case 1:
				while(introducir) {
					System.out.println("Di nombre:");
					String nombre = in.next();
					System.out.println("Introduce DNI: ");
					String dni = in.next();
					Persona persona = new Persona(nombre, dni);
					fronteras.add(persona);
					System.out.println("¿Introducir otro? s/n");
					String eleccion = in.next();
					if(eleccion.equals("n")) {
						introducir = false;
						break;
					}
				}
				break;
			case 2:
				for (Persona i : fronteras) {
					System.out.printf("El nombre es %s con DNI: %s%n", i.getNombre(), i.getDni());
				}
				break;
			case 3:
				System.out.println("Introduce un nombre para buscar: ");
				String busqueda = in.next();
				boolean encontrado = false;
				for (Persona i : fronteras) {
					if (i.getNombre().equals(busqueda)) {
						System.out.printf("Encontrado, número de DNI: %s", i.getDni());
						encontrado = true;
					} 
				}
				if(!encontrado) System.out.println("No encontrado.");
				break;
			case 4:
				System.out.println("Introduce un DNI para buscar: ");
				String encuentraDni = in.next();
				for (Persona i : fronteras) {
					if (i.getNombre().equals(encuentraDni)) {
						System.out.printf("Encontrado, nombre %s", i.getNombre());
					} else {
						System.out.println("No encontrado.");
					}
				}
				break;
			case 5:
				estado = false;
				break;

			}
			
		}
		System.out.println("FIN");

	}

	public static int comprobarEntrada() {
		int num = 0;
		boolean correcto = false; // variable para controlar que sea válido o no el número
		do {
			try { // Hace un try y recoge el Catch el error,
				Scanner entrada = new Scanner(System.in);
				System.out.println("\nElige opciones de menú");
				System.out.println(
						"1- Paso de frontera\n 2-Mostrar todas las personas\n 3-Búsqueda por nombre\n 4-Búsqueda por DNI\n 5-Salir");
				num = entrada.nextInt();
				if (num < 0 || num > 5) {
					System.out.println("error");
					correcto = false;
				} else { // si es correcto pasa a ser true y finaliza el bucle while y llega al return
							// final.
					correcto = true;
				}
			} catch (InputMismatchException e) {
				System.out.println("error");
				correcto = false;
			}
		} while (!correcto); // Mientras no sea correcto no dejará de pedir el dato al usuario.
		return num;
	}

}
